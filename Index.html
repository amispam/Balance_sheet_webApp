<!doctype html>
<html lang="en"> 
<head>
<meta charset="utf-8"> 
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous"> 
<title>Expense calculator</title>
<style>
</style> 
</head> 
<body>
<nav class="navbar navbar-expand-lg navbar-dark bg-dark"> <a class="navbar-brand" href="#">Balance Sheet</a>
<button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation" id="slide">
    <span class="navbar-toggler-icon"></span>
  </button>

  <div class="collapse navbar-collapse" id="navbarSupportedContent">
    <ul class="navbar-nav mr-auto">
      <li class="nav-item active" id="sbc">
        <a class="nav-link" href="#">Show budget card<span class="sr-only">(current)</span></a>
      </li>
      <li class="nav-item active" id="hbc">
        <a class="nav-link" href="#">Hide budget card<span class="sr-only">(current)</span></a>
        </li>
      </ul>
</nav>
<div class="container-fluid">
    <div class="container">
    <center><div class="card" style="width: 18rem;" id="info"> <img src="https://images.pexels.com/photos/2068975/pexels-photo-2068975.jpeg" class="card-img-top" alt="A girl counting money"> <div class="card-body"> <h5 class="card-title">Primary info</h5> <p class="card-text">It is an smart webApp to track your monthly expences. It can handle multiple inputs(each saperated with a '-' or minus sign) and creats a list of expences and let you manage them.</p>
   <a href="#" class="btn btn-primary" id="btn1">Let's track</a> </div> </div>
 
       <br />
   
<!-- Button trigger modal -->
<button type="button" class="btn btn-primary" data-toggle="modal" data-target="#staticBackdrop" id="main">
  Add
</button>

<!-- Modal -->
<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1" aria-labelledby="staticBackdropLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="staticBackdropLabel">Create list</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body">
        <input type="text" placeholder="Description..." id="abt" value="Book-Market-Monthly spending-Tuitions" />
        <br /><br />
        <input type="text" placeholder="Amount that you have to invest..." id="amount" value="1000-300-2000-267" />
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-secondary" data-dismiss="modal" id="close">Close</button>
        <button type="button" class="btn btn-primary" id="sub">Submit</button>
      </div>
    </div>
  </div>
</div>
  <br /><br />
  <!-- Budget -->
      <div class="alert alert-success" role="alert" id="bcard">
  <h4 class="alert-heading" id="bstatus">Balance: </h4>
  <p>This section is dedicated for continuous evaluation of your budget. We suggest you to keep track of your spendings, so that you can enjoy a budget surplus.</p>
  <hr>
  <p class="mb-0">powered by budget card</p>
</div>
  <br /><br />
<!-- Table -->
    <table class="table table-striped table-dark" id="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Timing</th>
      <th scope="col">Description</th>
      <th scope="col">Amount</th>
    </tr>
  </thead>
  <tbody id="content">
  
  </tbody>
</table>
<br /> <br />
<div class="table-responsive">
<!-- kill switch Media content -->
    <div class="media" id="kswitch">
  <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/f/f9/Not-Aus_Bet%C3%A4tiger.jpg/800px-Not-Aus_Bet%C3%A4tiger.jpg" class="mr-3" alt="kill switch" style="height:15vw; width:12vw;">
  <div class="media-body">
    <h5 class="mt-0">Kill switch</h5>
    You can kill, itemes listed above by providing their respective serial numbers.
    <br />
    <input type="number" id="serial" placeholder="Input your serial..." /><br /><br />
    <button class="btn btn-danger" id="kill">kill item</button>
  </div>
</div>
   </center>
    </div>
</div>

<script>
    const info = document.querySelector("#info");
    const btn1 = document.querySelector("#btn1");
    const main = document.querySelector("#main");
    const table = document.querySelector("#table");
    const abt = document.querySelector("#abt");
    const amount = document.querySelector("#amount");
    const sub = document.querySelector("#sub");
     const close = document.querySelector("#close");
     const content = document.querySelector("#content");
     const kswitch = document.querySelector("#kswitch");
     const kill = document.querySelector("#kill");
     const serial = document.querySelector("#serial");
     const bcard = document.querySelector("#bcard");
     const bstatus = document.querySelector("#bstatus");
     const slide = document.querySelector("#slide");
     const hbc = document.querySelector("#hbc");
     const sbc = document.querySelector("#sbc");
     slide.style.display = "none";
     bcard.style.display = "none";
     info.style.marginTop = "20vw";
     info.style.marginBottom = "20vw";
    table.style.display = "none";
     main.style.display = "none";
     kswitch.style.marginBottom = "10vw";
     kswitch.style.display ="none";
     let description = [];
     let total = [];
     let timer = [];
     let prse = 0;
    btn1.addEventListener("click" , function(){
        
        let data = prompt("Please enter your budget" , 5000);
    if(parseFloat(data) > 100 && data != null){
     prse = parseFloat(data);
    bstatus.innerHTML = "Balance: "+prse;
    bcard.style.display = "table-row";
    slide.style.display = "flex";
    }
    else{
        alert("Error... failed to execute, budget must be a positive integer, greater than 100");
    return;
    }
   
        info.style.display = "none";
        main.style.display = "flex";
        main.click();
    });
    sub.addEventListener("click" , function(){
    let arr2 = [];
        var d = new Date();
        var h = d.getHours();
        var m = d.getMinutes();
        if(abt.value.length > 0 && amount.value !== ""){
        if(amount.value <= 0){
        alert("Please input a valid amount of money");
    return;
    }
    
    table.style.display = "table-row";
    
    function lister(inp){
let ml1;
    if(inp[inp.length-1] === "-"){
        ml1 = inp;
    }
    if(inp[inp.length-1] !== "-"){
        ml1 = inp+"-";
    }
    let arr1 = [];
    arr2 = [];
    let arr3 = [];
    for(j = 0; j < ml1.length; j++){
        if(ml1[j]==="-"){
            arr1.push(j);
        }
    }
    for(j = 0; j < inp.length; j++){
        if(inp[j]==="-"){
            arr3.push(j);
        }
        }
    if(arr3.length == 0){
         arr2.push(inp);
        return arr2;
    }
    let k = 0;
    let m = 0;
    let l = 0;
    while(k < ml1.length){
        str="";
        for(k;k<arr1[l];k++){
            str+=ml1[k];
        }
        arr2.push(str);
        k = arr1[l]+1;
        l++;
    }
    return arr2;
    
}
    let relister = [];
    for(xn = 0; xn < lister(abt.value).length;xn++){
        relister.push(lister(abt.value)[xn]);
    }
    for(yn = 0; yn < lister(amount.value).length;yn++){
        relister.push(lister(amount.value)[yn]);
    }
    

    for(alpha=0;alpha<lister(amount.value).length; alpha++){
        if(isNaN(lister(amount.value)[alpha])){
            alert("Amount must be a number");
            return;
        }
    }
    
    
    if(lister(abt.value).length !== lister(amount.value).length){
        alert("Error, For each description, there must be an spending amount assigned to it...");
    }
    if(lister(abt.value).length === lister(amount.value).length){
    for(zn = 0; zn < relister.length/2; zn++){
    description.push(relister[zn]);
    total.push(relister[(relister.length/2)+zn]);
    timer.push(h+":"+m);
    content.innerHTML += "<tr><th scope=\"row\">"+total.length+"</th><td>"+h+":"+m+"</td><td>"+relister[zn]+"</td><td>"+relister[(relister.length/2)+zn]+"</td></tr>";
    }
    close.click();
    }
     let loop = 0;
      let looptotal = 0;
    for(loop = 0; loop < total.length; loop++){
        looptotal += parseFloat(total[loop]);
    }
    looptotal = prse - looptotal;
    bstatus.innerHTML = "Balance: "+looptotal;

    kswitch.style.display = "flex";
    }
    else{
        alert("Either description or amount entry is invalid...");
    close.click();
        return;
    }
    });
    kill.addEventListener("click" , function(){
        let i = 0;
    if(parseFloat(serial.value) === parseInt(serial.value) && serial.value > 0 && serial.value <= total.length){
        description.splice(serial.value - 1,1);
    total.splice(serial.value - 1,1);
    timer.splice(serial.value - 1,1);
    content.innerHTML = "";
    for(i = 0; i < total.length; i++){
        content.innerHTML += "<tr><th scope=\"row\">"+(eval(i+1))+"</th><td>"+timer[i]+"</td><td>"+description[i]+"</td><td>"+total[i]+"</td></tr>";
    }
        let loop = 0;
      let looptotal = 0;
    for(loop = 0; loop < total.length; loop++){
        looptotal += parseFloat(total[loop]);
    }
    looptotal = prse - looptotal;
    bstatus.innerHTML = "Balance: "+looptotal;

    }
    else{
        alert("Invalid entry, serial must be a positive integer and inside index range...");
    }
    });
    sbc.addEventListener("click" , function(){
        bcard.style.display = "table-row";
    });
    hbc.addEventListener("click" , function(){
        bcard.style.display = "none";
    });
</script>
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script> </body> </html>
